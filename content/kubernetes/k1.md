+++
title = "Kubernetes: Touning resources"
date = 2025-10-17
draft = false
tags = ["kubernetes"]
+++

Ok, andiamo dritti. Hai cambiato i values, i pod vecchi sono stati killati e i nuovi non partono. Facciamo troubleshooting in 6 check veloci. Copiaâ€“incolla e leggiamo i messaggi chiave.

0) Stato rollout (capire cosa manca)

kubectl rollout status deploy/prov-ippv2-pr-platform-ippv2-emailsender -n prov-ippv2-pr-platform-namespace
kubectl get deploy/prov-ippv2-pr-platform-ippv2-emailsender -n prov-ippv2-pr-platform-namespace -o wide


# Requests = what the scheduler needs to place a pod
cpu_request: 200m
memory_request: 512Mi

# Limits
memory_limit: 2048Mi     # keep this to avoid OOM
# no cpu_limit            # OK to omit â†’ fewer throttle issues


# Quando un servizio in Kubernetes Ã¨ â€œUnavailableâ€ e va in timeout, i **3 comandi immediati** sono:

---

### **1) `kubectl get pods -o wide`**

ğŸ‘‰ **Cosa cerco:**

- i pod del deployment sono *Running* o *CrashLoopBackOff*?
- sono schedulati sul nodo giusto?
- sono *Ready*? (colonna READY deve essere es. 1/1)

---

### **2) `kubectl describe pod <nome-pod>`**

ğŸ‘‰ **Cosa cerco:**

- Events: probe fallite? (liveness/readiness)
- immagine non trovata?
- errori di mount volumi?
- problemi di rete?

---

### **3) `kubectl logs <nome-pod>`**

ğŸ‘‰ **Cosa cerco:**

- errori runtime dell'app
- errori di connessione al DB
- errori 500, crash dell'app
- stacktrace

---

# ğŸ¯ PerchÃ© questi 3?

PerchÃ© un Service â€œUnavailableâ€ in Kubernetes **non Ã¨ mai un problema del servizio** â†’

Ã¨ un problema dei **pod dietro al servizio**.

Quindi guardi:

1. **Stato dei pod**
2. **Eventi del pod**
3. **Log dellâ€™app**

---